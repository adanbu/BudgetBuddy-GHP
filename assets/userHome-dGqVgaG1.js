import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */import"./navigationUserScreen-2NQdNthr.js";document.addEventListener("DOMContentLoaded",function(){const i=localStorage.getItem("token");if(i){const y=JSON.parse(i).value;axios.get("https://partialbackendforweb.onrender.com/pages/userHome",{headers:{Authorization:`Bearer ${y}`}}).then(o=>{console.log("Response received:",o.data);const a=o.data,d=a.name,g=o.data.email;localStorage.setItem("userName",d),localStorage.setItem("userEmail",g);const E=document.getElementById("userNameHam");E.textContent=d;const f=document.getElementById("userEmailHam");f.textContent=g;const M=document.getElementById("welcomeMsgUser");M.textContent=`Welcome ${d},`;const h=new Date,u=h.getMonth()+1,l=h.getFullYear(),$=a.income.reduce((t,e)=>{const n=new Date(e.date);return n.getMonth()+1===u&&n.getFullYear()===l?t+e.amount:t},0),C=document.getElementById("incomeCnt");C.textContent=`$${$}`;const p=a.expenses.reduce((t,e)=>{const n=new Date(e.startDate);return n.getMonth()+1===u&&n.getFullYear()===l?t+e.amount:t},0),v=document.getElementById("expansesCnt");v.textContent=`$${p}`;const D=a.budget.find(t=>{const e=new Date(t.budgetDate);return e.getMonth()+1===u&&e.getFullYear()===l}),k=(D?D.limit:0)-p,B=document.getElementById("budgetCnt");B.textContent=`$${k}`;const x=document.querySelector(".goal-container");x.innerHTML="",o.data.goals.forEach(t=>{const e=document.createElement("div");e.classList.add("shadow","p-2","dark:text-white"),e.innerHTML=`
                        ${t.name}<br>
                        Goal: ${t.amount}<br>
                        Saved: ${t.amountSaved}<br>
                        <div class="w-full bg-gray-50 rounded-full dark:bg-gray-700 shadow">
                            <div class="bg-lime-500 text-xs font-medium text-gray-50 text-center p-0.5 leading-none rounded-full" style="width: ${Math.floor(t.amountSaved/t.amount*100)}%"> ${Math.floor(t.amountSaved/t.amount*100)}%</div>
                        </div>
                    `,x.appendChild(e)});const b=document.getElementById("latestExpensesBody");b.innerHTML="",o.data.expenses.forEach(t=>{const n=new Date(t.startDate).getMonth(),m=new Date().getMonth();if(n==m){const c=document.createElement("tr");c.classList.add("border-b","bg-white","dark:bg-gray-900","dark:border-gray-700"),c.innerHTML=`
                          <td class="whitespace-nowrap px-6 py-4 font-medium">${t.startDate}</td>
                          <td class="whitespace-nowrap px-6 py-4 dark:text-white">${t.payee}</td>
                          <td class="whitespace-nowrap px-6 py-4 dark:text-white">${t.category}</td>
                          <td class="whitespace-nowrap px-6 py-4 dark:text-white">$${t.amount}</td>
                      `,b.appendChild(c)}});const r=["Shopping","Food","Transportation","Loan","Groceries","Other"],w=o.data.expenses;console.log(w);const s={};r.forEach(t=>{s[t]=0}),w.forEach(t=>{const e=t.category,n=parseFloat(t.amount),m=new Date(t.startDate).getMonth(),L=new Date().getMonth();m===L&&r.includes(e)&&(s[e]+=n)});const I={type:"doughnut",data:{labels:r,datasets:[{data:r.map(t=>s[t]),backgroundColor:["rgb(133, 105, 241)","rgb(164, 101, 241)","rgb(101, 143, 241)","rgb(200, 100,241)","rgb(11, 81,96)"],hoverOffset:4}]},options:{plugins:{doughnutlabel:{labels:[{text:"Total",font:{size:"20"},color:"#000"}]}}}};console.log(s),new Chart(document.getElementById("chartDoughnut"),I)}).catch(o=>{console.error("Error occurred:",o)})}else console.error("Token not found in localStorage")});
